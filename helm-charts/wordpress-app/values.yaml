# Default values for wordpress-app
# This is a YAML-formatted file.

# Global settings
global:
  storageClass: "standard"  # Change based on your cluster (e.g., gp2, standard, local-path)

# Nginx (OpenResty) configuration
nginx:
  enabled: true
  replicaCount: 2
  image:
    repository: wordpress-nginx
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: LoadBalancer  # Change to NodePort or ClusterIP as needed
    port: 80
    targetPort: 80
    metricsPort: 9145
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 80

# WordPress configuration
wordpress:
  enabled: true
  replicaCount: 2
  image:
    repository: wordpress-custom
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 9000
  env:
    WORDPRESS_DB_HOST: "mysql-service"
    WORDPRESS_DB_NAME: "wordpress"
    WORDPRESS_DB_USER: "wordpress"
    WORDPRESS_DB_PASSWORD: "wordpress123"  # Change in production!
    WORDPRESS_DEBUG: "false"
    WORDPRESS_DEBUG_LOG: "false"
  resources:
    requests:
      memory: "512Mi"
      cpu: "500m"
    limits:
      memory: "1Gi"
      cpu: "1000m"
  persistence:
    enabled: true
    storageClass: "standard"
    accessMode: ReadWriteMany
    size: 10Gi
  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 80

# MySQL configuration
mysql:
  enabled: true
  replicaCount: 1  # Single instance for simplicity
  image:
    repository: mysql-custom
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 3306
  env:
    MYSQL_ROOT_PASSWORD: "rootpassword123"  # Change in production!
    MYSQL_DATABASE: "wordpress"
    MYSQL_USER: "wordpress"
    MYSQL_PASSWORD: "wordpress123"  # Change in production!
  resources:
    requests:
      memory: "1Gi"
      cpu: "500m"
    limits:
      memory: "2Gi"
      cpu: "1000m"
  persistence:
    enabled: true
    storageClass: "standard"
    accessMode: ReadWriteMany
    size: 20Gi

# Persistent Volume configuration
persistence:
  wordpress:
    storageClass: "standard"
    accessMode: ReadWriteMany
    size: 10Gi
  mysql:
    storageClass: "standard"
    accessMode: ReadWriteMany
    size: 20Gi

# Service Monitor for Prometheus (if using Prometheus Operator)
serviceMonitor:
  enabled: true
  interval: 30s
  scrapeTimeout: 10s

# Pod Disruption Budget
podDisruptionBudget:
  enabled: true
  minAvailable: 1
